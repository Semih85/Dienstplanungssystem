@model NobetciEczaneMesafelerViewModel

@{
    ViewBag.Title = "Nöbetçi Eczaneler Arası Mesafeler |  Nöbet Yaz";
}

<!-- #region ajaxOptions -->
@{
    var getAjaxOptions = new AjaxOptions
    {
        AllowCache = false,
        Url = Url.Action("NobetciEczaneMesafelerPartial"),
        HttpMethod = "GET",
        UpdateTargetId = "sonuclar",
        InsertionMode = InsertionMode.Replace,
        LoadingElementId = "wait"
    };
}
<!-- #endregion -->

<h4>Nöbetçi Eczaneler Arası Mesafeler</h4>

@using (Ajax.BeginForm(null, null, getAjaxOptions, new { @class = "form-inline" }))
{
    @Html.AntiForgeryToken()

    <div class="form-inline">

        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        <div class="form-group col-md-4">
            @*@Html.LabelFor(model => model.AcilisTarihi, htmlAttributes: new { @class = "control-label" })*@
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text p-2">
                        <i class="fa fa-calendar" aria-hidden="true"></i>
                    </span>
                </div>
                @Html.TextBoxFor(model => model.NobetTarihi, new { @class = "form-control datepicker p-2", autocomplete = "off", placeHolder = "Nöbet Tarihi" })
            </div>
            @Html.ValidationMessageFor(model => model.NobetTarihi, "", new { @class = "text-danger" })
        </div>

        @*@Html.LabelFor(model => model.AcilisTarihi, htmlAttributes: new { @class = "control-label" })*@

        <div class="input-group mr-2 mr-lg-4 mb-3 mb-md-0">
            <div class="input-group-prepend">
                <span class="input-group-text p-2">
                    <i class="fa fa-map-signs mr-1" aria-hidden="true"></i> <span class="small"> Mesafe (m.) @*&#8804;*@ &ge;</span>
                </span>
            </div>
            @Html.TextBox("MesafeKriter", (int)ViewBag.MesafeKriteri, new { @class = "form-control text-center p-2", placeHolder = "Mesafe", autocomplete = "off", style = "width:70px;" })
        </div>

        @*@Html.ValidationMessageFor(model => model.Tarih, "", new { @class = "text-danger" })*@

        <div class="form-group mr-2">
            <button type="submit" id="btnSorgula" class="btn btn-primary"><i class="fa fa-search"></i> Sorgula</button>

        </div>

        <span id="wait" class="spinner-border text-primary" role="status" style="display:none;">
            <span class="sr-only">Loading...</span>
        </span>
    </div>
}

<hr class="border-danger" />

<div id="sonuclar" class="mt-2">
</div>

@using (Ajax.BeginForm(null, null, getAjaxOptions, new { @class = "form-inline", id = "formYeniNobetcininNobetleri" }))
{
    @Html.AntiForgeryToken()

    @Html.Hidden("EczaneNobetGrupIdYeniNobetci")
}

@section Styles{
    @Styles.Render("~/bundle/bootstrap-datepicker/style")
}

@section Scripts{
    @Scripts.Render("~/bundle/bootstrap-datepicker/scripts")
    @Scripts.Render("~/bundle/ajax")
    @Scripts.Render("~/bundle/validation/scripts")

    <script>
        $(function () {
            //var d = new Date();
            //var strDate = d.getFullYear() + "." + (d.getMonth() + 1) + "." + d.getDate();
            //$("#AcilisTarihi").val(strDate);
            $('.datepicker').datepicker('setStartDate', "01-01-1900");

            //var baslangicStr = tarihDondur2($("#AcilisTarihi").val());

            $("#NobetTarihi").datepicker("setDate", new Date());

            if ($("#NobetUstGrupId option").length > 1) {
                $("#NobetUstGrupId").show();
            }

        });
    </script>

    <script>

        function onSuccessNobetDegistir(data) {
            //console.log(data)
            //refreshedPage = $(data);
            //newDemo = refreshedPage.find("#partialPageYeniNobetci").html();
            $('#yeniNobetcininNobetleri').html(data)
            $('#EczaneNobetSonucIdYeniNobetci').selectpicker()

            $('#submitButtonNobetDegisim').val("Nöbetleri Karşılıklı Değiştir");
            $('#yeniNobetcininNobetleri').show();
            //$('#yeniNobetcininNobetleri').html(data);
        }

        function onSuccessNobetDegisim() {

        }
    </script>
}